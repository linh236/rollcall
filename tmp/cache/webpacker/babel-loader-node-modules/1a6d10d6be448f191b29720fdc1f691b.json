{"ast":null,"code":"// WebcamJS v1.0.25 - http://github.com/jhuckaby/webcamjs - MIT Licensed\n(function (e) {\n  var t;\n\n  function a() {\n    var e = Error.apply(this, arguments);\n    e.name = this.name = \"FlashError\";\n    this.stack = e.stack;\n    this.message = e.message;\n  }\n\n  function i() {\n    var e = Error.apply(this, arguments);\n    e.name = this.name = \"WebcamError\";\n    this.stack = e.stack;\n    this.message = e.message;\n  }\n\n  var s = function s() {};\n\n  s.prototype = Error.prototype;\n  a.prototype = new s();\n  i.prototype = new s();\n  var Webcam = {\n    version: \"1.0.25\",\n    protocol: location.protocol.match(/https/i) ? \"https\" : \"http\",\n    loaded: false,\n    live: false,\n    userMedia: true,\n    iOS: /iPad|iPhone|iPod/.test(navigator.userAgent) && !e.MSStream,\n    params: {\n      width: 0,\n      height: 0,\n      dest_width: 0,\n      dest_height: 0,\n      image_format: \"jpeg\",\n      jpeg_quality: 90,\n      enable_flash: true,\n      force_flash: false,\n      flip_horiz: false,\n      fps: 30,\n      upload_name: \"webcam\",\n      constraints: null,\n      swfURL: \"\",\n      flashNotDetectedText: \"ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).\",\n      noInterfaceFoundText: \"No supported webcam interface found.\",\n      unfreeze_snap: true,\n      iosPlaceholderText: \"Click here to open camera.\",\n      user_callback: null,\n      user_canvas: null\n    },\n    errors: {\n      FlashError: a,\n      WebcamError: i\n    },\n    hooks: {},\n    init: function init() {\n      var t = this;\n      this.mediaDevices = navigator.mediaDevices && navigator.mediaDevices.getUserMedia ? navigator.mediaDevices : navigator.mozGetUserMedia || navigator.webkitGetUserMedia ? {\n        getUserMedia: function getUserMedia(e) {\n          return new Promise(function (t, a) {\n            (navigator.mozGetUserMedia || navigator.webkitGetUserMedia).call(navigator, e, t, a);\n          });\n        }\n      } : null;\n      e.URL = e.URL || e.webkitURL || e.mozURL || e.msURL;\n      this.userMedia = this.userMedia && !!this.mediaDevices && !!e.URL;\n\n      if (this.iOS) {\n        this.userMedia = null;\n      }\n\n      if (navigator.userAgent.match(/Firefox\\D+(\\d+)/)) {\n        if (parseInt(RegExp.$1, 10) < 21) this.userMedia = null;\n      }\n\n      if (this.userMedia) {\n        e.addEventListener(\"beforeunload\", function (e) {\n          t.reset();\n        });\n      }\n    },\n    exifOrientation: function exifOrientation(e) {\n      var t = new DataView(e);\n\n      if (t.getUint8(0) != 255 || t.getUint8(1) != 216) {\n        console.log(\"Not a valid JPEG file\");\n        return 0;\n      }\n\n      var a = 2;\n      var i = null;\n\n      while (a < e.byteLength) {\n        if (t.getUint8(a) != 255) {\n          console.log(\"Not a valid marker at offset \" + a + \", found: \" + t.getUint8(a));\n          return 0;\n        }\n\n        i = t.getUint8(a + 1);\n\n        if (i == 225) {\n          a += 4;\n          var s = \"\";\n\n          for (n = 0; n < 4; n++) {\n            s += String.fromCharCode(t.getUint8(a + n));\n          }\n\n          if (s != \"Exif\") {\n            console.log(\"Not valid EXIF data found\");\n            return 0;\n          }\n\n          a += 6;\n          var r = null;\n\n          if (t.getUint16(a) == 18761) {\n            r = false;\n          } else if (t.getUint16(a) == 19789) {\n            r = true;\n          } else {\n            console.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\n            return 0;\n          }\n\n          if (t.getUint16(a + 2, !r) != 42) {\n            console.log(\"Not valid TIFF data! (no 0x002A)\");\n            return 0;\n          }\n\n          var o = t.getUint32(a + 4, !r);\n\n          if (o < 8) {\n            console.log(\"Not valid TIFF data! (First offset less than 8)\", t.getUint32(a + 4, !r));\n            return 0;\n          }\n\n          var l = a + o;\n          var h = t.getUint16(l, !r);\n\n          for (var c = 0; c < h; c++) {\n            var d = l + c * 12 + 2;\n\n            if (t.getUint16(d, !r) == 274) {\n              var f = t.getUint16(d + 2, !r);\n              var m = t.getUint32(d + 4, !r);\n\n              if (f != 3 && m != 1) {\n                console.log(\"Invalid EXIF orientation value type (\" + f + \") or count (\" + m + \")\");\n                return 0;\n              }\n\n              var p = t.getUint16(d + 8, !r);\n\n              if (p < 1 || p > 8) {\n                console.log(\"Invalid EXIF orientation value (\" + p + \")\");\n                return 0;\n              }\n\n              return p;\n            }\n          }\n        } else {\n          a += 2 + t.getUint16(a + 2);\n        }\n      }\n\n      return 0;\n    },\n    fixOrientation: function fixOrientation(e, t, a) {\n      var i = new Image();\n      i.addEventListener(\"load\", function (e) {\n        var s = document.createElement(\"canvas\");\n        var r = s.getContext(\"2d\");\n\n        if (t < 5) {\n          s.width = i.width;\n          s.height = i.height;\n        } else {\n          s.width = i.height;\n          s.height = i.width;\n        }\n\n        switch (t) {\n          case 2:\n            r.transform(-1, 0, 0, 1, i.width, 0);\n            break;\n\n          case 3:\n            r.transform(-1, 0, 0, -1, i.width, i.height);\n            break;\n\n          case 4:\n            r.transform(1, 0, 0, -1, 0, i.height);\n            break;\n\n          case 5:\n            r.transform(0, 1, 1, 0, 0, 0);\n            break;\n\n          case 6:\n            r.transform(0, 1, -1, 0, i.height, 0);\n            break;\n\n          case 7:\n            r.transform(0, -1, -1, 0, i.height, i.width);\n            break;\n\n          case 8:\n            r.transform(0, -1, 1, 0, 0, i.width);\n            break;\n        }\n\n        r.drawImage(i, 0, 0);\n        a.src = s.toDataURL();\n      }, false);\n      i.src = e;\n    },\n    attach: function attach(a) {\n      if (typeof a == \"string\") {\n        a = document.getElementById(a) || document.querySelector(a);\n      }\n\n      if (!a) {\n        return this.dispatch(\"error\", new i(\"Could not locate DOM element to attach to.\"));\n      }\n\n      this.container = a;\n      a.innerHTML = \"\";\n      var s = document.createElement(\"div\");\n      a.appendChild(s);\n      this.peg = s;\n      if (!this.params.width) this.params.width = a.offsetWidth;\n      if (!this.params.height) this.params.height = a.offsetHeight;\n\n      if (!this.params.width || !this.params.height) {\n        return this.dispatch(\"error\", new i(\"No width and/or height for webcam.  Please call set() first, or attach to a visible element.\"));\n      }\n\n      if (!this.params.dest_width) this.params.dest_width = this.params.width;\n      if (!this.params.dest_height) this.params.dest_height = this.params.height;\n      this.userMedia = t === undefined ? this.userMedia : t;\n\n      if (this.params.force_flash) {\n        t = this.userMedia;\n        this.userMedia = null;\n      }\n\n      if (typeof this.params.fps !== \"number\") this.params.fps = 30;\n      var r = this.params.width / this.params.dest_width;\n      var o = this.params.height / this.params.dest_height;\n\n      if (this.userMedia) {\n        var n = document.createElement(\"video\");\n        n.setAttribute(\"autoplay\", \"autoplay\");\n        n.style.width = \"\" + this.params.dest_width + \"px\";\n        n.style.height = \"\" + this.params.dest_height + \"px\";\n\n        if (r != 1 || o != 1) {\n          a.style.overflow = \"hidden\";\n          n.style.webkitTransformOrigin = \"0px 0px\";\n          n.style.mozTransformOrigin = \"0px 0px\";\n          n.style.msTransformOrigin = \"0px 0px\";\n          n.style.oTransformOrigin = \"0px 0px\";\n          n.style.transformOrigin = \"0px 0px\";\n          n.style.webkitTransform = \"scaleX(\" + r + \") scaleY(\" + o + \")\";\n          n.style.mozTransform = \"scaleX(\" + r + \") scaleY(\" + o + \")\";\n          n.style.msTransform = \"scaleX(\" + r + \") scaleY(\" + o + \")\";\n          n.style.oTransform = \"scaleX(\" + r + \") scaleY(\" + o + \")\";\n          n.style.transform = \"scaleX(\" + r + \") scaleY(\" + o + \")\";\n        }\n\n        a.appendChild(n);\n        this.video = n;\n        var l = this;\n        this.mediaDevices.getUserMedia({\n          audio: false,\n          video: this.params.constraints || {\n            mandatory: {\n              minWidth: this.params.dest_width,\n              minHeight: this.params.dest_height\n            }\n          }\n        }).then(function (t) {\n          n.onloadedmetadata = function (e) {\n            l.stream = t;\n            l.loaded = true;\n            l.live = true;\n            l.dispatch(\"load\");\n            l.dispatch(\"live\");\n            l.flip();\n          };\n\n          if (\"srcObject\" in n) {\n            n.srcObject = t;\n          } else {\n            n.src = e.URL.createObjectURL(t);\n          }\n        })[\"catch\"](function (e) {\n          if (l.params.enable_flash && l.detectFlash()) {\n            setTimeout(function () {\n              l.params.force_flash = 1;\n              l.attach(a);\n            }, 1);\n          } else {\n            l.dispatch(\"error\", e);\n          }\n        });\n      } else if (this.iOS) {\n        var h = document.createElement(\"div\");\n        h.id = this.container.id + \"-ios_div\";\n        h.className = \"webcamjs-ios-placeholder\";\n        h.style.width = \"\" + this.params.width + \"px\";\n        h.style.height = \"\" + this.params.height + \"px\";\n        h.style.textAlign = \"center\";\n        h.style.display = \"table-cell\";\n        h.style.verticalAlign = \"middle\";\n        h.style.backgroundRepeat = \"no-repeat\";\n        h.style.backgroundSize = \"contain\";\n        h.style.backgroundPosition = \"center\";\n        var c = document.createElement(\"span\");\n        c.className = \"webcamjs-ios-text\";\n        c.innerHTML = this.params.iosPlaceholderText;\n        h.appendChild(c);\n        var d = document.createElement(\"img\");\n        d.id = this.container.id + \"-ios_img\";\n        d.style.width = \"\" + this.params.dest_width + \"px\";\n        d.style.height = \"\" + this.params.dest_height + \"px\";\n        d.style.display = \"none\";\n        h.appendChild(d);\n        var f = document.createElement(\"input\");\n        f.id = this.container.id + \"-ios_input\";\n        f.setAttribute(\"type\", \"file\");\n        f.setAttribute(\"accept\", \"image/*\");\n        f.setAttribute(\"capture\", \"camera\");\n        var l = this;\n        var m = this.params;\n        f.addEventListener(\"change\", function (e) {\n          if (e.target.files.length > 0 && e.target.files[0].type.indexOf(\"image/\") == 0) {\n            var t = URL.createObjectURL(e.target.files[0]);\n            var a = new Image();\n            a.addEventListener(\"load\", function (e) {\n              var t = document.createElement(\"canvas\");\n              t.width = m.dest_width;\n              t.height = m.dest_height;\n              var i = t.getContext(\"2d\");\n              ratio = Math.min(a.width / m.dest_width, a.height / m.dest_height);\n              var s = m.dest_width * ratio;\n              var r = m.dest_height * ratio;\n              var o = (a.width - s) / 2;\n              var n = (a.height - r) / 2;\n              i.drawImage(a, o, n, s, r, 0, 0, m.dest_width, m.dest_height);\n              var l = t.toDataURL();\n              d.src = l;\n              h.style.backgroundImage = \"url('\" + l + \"')\";\n            }, false);\n            var i = new FileReader();\n            i.addEventListener(\"load\", function (e) {\n              var i = l.exifOrientation(e.target.result);\n\n              if (i > 1) {\n                l.fixOrientation(t, i, a);\n              } else {\n                a.src = t;\n              }\n            }, false);\n            var s = new XMLHttpRequest();\n            s.open(\"GET\", t, true);\n            s.responseType = \"blob\";\n\n            s.onload = function (e) {\n              if (this.status == 200 || this.status === 0) {\n                i.readAsArrayBuffer(this.response);\n              }\n            };\n\n            s.send();\n          }\n        }, false);\n        f.style.display = \"none\";\n        a.appendChild(f);\n        h.addEventListener(\"click\", function (e) {\n          if (m.user_callback) {\n            l.snap(m.user_callback, m.user_canvas);\n          } else {\n            f.style.display = \"block\";\n            f.focus();\n            f.click();\n            f.style.display = \"none\";\n          }\n        }, false);\n        a.appendChild(h);\n        this.loaded = true;\n        this.live = true;\n      } else if (this.params.enable_flash && this.detectFlash()) {\n        e.Webcam = Webcam;\n        var h = document.createElement(\"div\");\n        h.innerHTML = this.getSWFHTML();\n        a.appendChild(h);\n      } else {\n        this.dispatch(\"error\", new i(this.params.noInterfaceFoundText));\n      }\n\n      if (this.params.crop_width && this.params.crop_height) {\n        var p = Math.floor(this.params.crop_width * r);\n        var u = Math.floor(this.params.crop_height * o);\n        a.style.width = \"\" + p + \"px\";\n        a.style.height = \"\" + u + \"px\";\n        a.style.overflow = \"hidden\";\n        a.scrollLeft = Math.floor(this.params.width / 2 - p / 2);\n        a.scrollTop = Math.floor(this.params.height / 2 - u / 2);\n      } else {\n        a.style.width = \"\" + this.params.width + \"px\";\n        a.style.height = \"\" + this.params.height + \"px\";\n      }\n    },\n    reset: function reset() {\n      if (this.preview_active) this.unfreeze();\n      this.unflip();\n\n      if (this.userMedia) {\n        if (this.stream) {\n          if (this.stream.getVideoTracks) {\n            var e = this.stream.getVideoTracks();\n            if (e && e[0] && e[0].stop) e[0].stop();\n          } else if (this.stream.stop) {\n            this.stream.stop();\n          }\n        }\n\n        delete this.stream;\n        delete this.video;\n      }\n\n      if (this.userMedia !== true && this.loaded && !this.iOS) {\n        var t = this.getMovie();\n        if (t && t._releaseCamera) t._releaseCamera();\n      }\n\n      if (this.container) {\n        this.container.innerHTML = \"\";\n        delete this.container;\n      }\n\n      this.loaded = false;\n      this.live = false;\n    },\n    set: function set() {\n      if (arguments.length == 1) {\n        for (var e in arguments[0]) {\n          this.params[e] = arguments[0][e];\n        }\n      } else {\n        this.params[arguments[0]] = arguments[1];\n      }\n    },\n    on: function on(e, t) {\n      e = e.replace(/^on/i, \"\").toLowerCase();\n      if (!this.hooks[e]) this.hooks[e] = [];\n      this.hooks[e].push(t);\n    },\n    off: function off(e, t) {\n      e = e.replace(/^on/i, \"\").toLowerCase();\n\n      if (this.hooks[e]) {\n        if (t) {\n          var a = this.hooks[e].indexOf(t);\n          if (a > -1) this.hooks[e].splice(a, 1);\n        } else {\n          this.hooks[e] = [];\n        }\n      }\n    },\n    dispatch: function dispatch() {\n      var t = arguments[0].replace(/^on/i, \"\").toLowerCase();\n      var s = Array.prototype.slice.call(arguments, 1);\n\n      if (this.hooks[t] && this.hooks[t].length) {\n        for (var r = 0, o = this.hooks[t].length; r < o; r++) {\n          var n = this.hooks[t][r];\n\n          if (typeof n == \"function\") {\n            n.apply(this, s);\n          } else if (typeof n == \"object\" && n.length == 2) {\n            n[0][n[1]].apply(n[0], s);\n          } else if (e[n]) {\n            e[n].apply(e, s);\n          }\n        }\n\n        return true;\n      } else if (t == \"error\") {\n        var l;\n\n        if (s[0] instanceof a || s[0] instanceof i) {\n          l = s[0].message;\n        } else {\n          l = \"Could not access webcam: \" + s[0].name + \": \" + s[0].message + \" \" + s[0].toString();\n        }\n\n        alert(\"Webcam.js Error: \" + l);\n      }\n\n      return false;\n    },\n    setSWFLocation: function setSWFLocation(e) {\n      this.set(\"swfURL\", e);\n    },\n    detectFlash: function detectFlash() {\n      var t = \"Shockwave Flash\",\n          a = \"ShockwaveFlash.ShockwaveFlash\",\n          i = \"application/x-shockwave-flash\",\n          s = e,\n          r = navigator,\n          o = false;\n\n      if (typeof r.plugins !== \"undefined\" && typeof r.plugins[t] === \"object\") {\n        var n = r.plugins[t].description;\n\n        if (n && typeof r.mimeTypes !== \"undefined\" && r.mimeTypes[i] && r.mimeTypes[i].enabledPlugin) {\n          o = true;\n        }\n      } else if (typeof s.ActiveXObject !== \"undefined\") {\n        try {\n          var l = new ActiveXObject(a);\n\n          if (l) {\n            var h = l.GetVariable(\"$version\");\n            if (h) o = true;\n          }\n        } catch (e) {}\n      }\n\n      return o;\n    },\n    getSWFHTML: function getSWFHTML() {\n      var t = \"\",\n          i = this.params.swfURL;\n\n      if (location.protocol.match(/file/)) {\n        this.dispatch(\"error\", new a(\"Flash does not work from local disk.  Please run from a web server.\"));\n        return '<h3 style=\"color:red\">ERROR: the Webcam.js Flash fallback does not work from local disk.  Please run it from a web server.</h3>';\n      }\n\n      if (!this.detectFlash()) {\n        this.dispatch(\"error\", new a(\"Adobe Flash Player not found.  Please install from get.adobe.com/flashplayer and try again.\"));\n        return '<h3 style=\"color:red\">' + this.params.flashNotDetectedText + \"</h3>\";\n      }\n\n      if (!i) {\n        var s = \"\";\n        var r = document.getElementsByTagName(\"script\");\n\n        for (var o = 0, n = r.length; o < n; o++) {\n          var l = r[o].getAttribute(\"src\");\n\n          if (l && l.match(/\\/webcam(\\.min)?\\.js/)) {\n            s = l.replace(/\\/webcam(\\.min)?\\.js.*$/, \"\");\n            o = n;\n          }\n        }\n\n        if (s) i = s + \"/webcam.swf\";else i = \"webcam.swf\";\n      }\n\n      if (e.localStorage && !localStorage.getItem(\"visited\")) {\n        this.params.new_user = 1;\n        localStorage.setItem(\"visited\", 1);\n      }\n\n      var h = \"\";\n\n      for (var c in this.params) {\n        if (h) h += \"&\";\n        h += c + \"=\" + escape(this.params[c]);\n      }\n\n      t += '<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" type=\"application/x-shockwave-flash\" codebase=\"' + this.protocol + '://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0\" width=\"' + this.params.width + '\" height=\"' + this.params.height + '\" id=\"webcam_movie_obj\" align=\"middle\"><param name=\"wmode\" value=\"opaque\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"false\" /><param name=\"movie\" value=\"' + i + '\" /><param name=\"loop\" value=\"false\" /><param name=\"menu\" value=\"false\" /><param name=\"quality\" value=\"best\" /><param name=\"bgcolor\" value=\"#ffffff\" /><param name=\"flashvars\" value=\"' + h + '\"/><embed id=\"webcam_movie_embed\" src=\"' + i + '\" wmode=\"opaque\" loop=\"false\" menu=\"false\" quality=\"best\" bgcolor=\"#ffffff\" width=\"' + this.params.width + '\" height=\"' + this.params.height + '\" name=\"webcam_movie_embed\" align=\"middle\" allowScriptAccess=\"always\" allowFullScreen=\"false\" type=\"application/x-shockwave-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" flashvars=\"' + h + '\"></embed></object>';\n      return t;\n    },\n    getMovie: function getMovie() {\n      if (!this.loaded) return this.dispatch(\"error\", new a(\"Flash Movie is not loaded yet\"));\n      var e = document.getElementById(\"webcam_movie_obj\");\n      if (!e || !e._snap) e = document.getElementById(\"webcam_movie_embed\");\n      if (!e) this.dispatch(\"error\", new a(\"Cannot locate Flash movie in DOM\"));\n      return e;\n    },\n    freeze: function freeze() {\n      var e = this;\n      var t = this.params;\n      if (this.preview_active) this.unfreeze();\n      var a = this.params.width / this.params.dest_width;\n      var i = this.params.height / this.params.dest_height;\n      this.unflip();\n      var s = t.crop_width || t.dest_width;\n      var r = t.crop_height || t.dest_height;\n      var o = document.createElement(\"canvas\");\n      o.width = s;\n      o.height = r;\n      var n = o.getContext(\"2d\");\n      this.preview_canvas = o;\n      this.preview_context = n;\n\n      if (a != 1 || i != 1) {\n        o.style.webkitTransformOrigin = \"0px 0px\";\n        o.style.mozTransformOrigin = \"0px 0px\";\n        o.style.msTransformOrigin = \"0px 0px\";\n        o.style.oTransformOrigin = \"0px 0px\";\n        o.style.transformOrigin = \"0px 0px\";\n        o.style.webkitTransform = \"scaleX(\" + a + \") scaleY(\" + i + \")\";\n        o.style.mozTransform = \"scaleX(\" + a + \") scaleY(\" + i + \")\";\n        o.style.msTransform = \"scaleX(\" + a + \") scaleY(\" + i + \")\";\n        o.style.oTransform = \"scaleX(\" + a + \") scaleY(\" + i + \")\";\n        o.style.transform = \"scaleX(\" + a + \") scaleY(\" + i + \")\";\n      }\n\n      this.snap(function () {\n        o.style.position = \"relative\";\n        o.style.left = \"\" + e.container.scrollLeft + \"px\";\n        o.style.top = \"\" + e.container.scrollTop + \"px\";\n        e.container.insertBefore(o, e.peg);\n        e.container.style.overflow = \"hidden\";\n        e.preview_active = true;\n      }, o);\n    },\n    unfreeze: function unfreeze() {\n      if (this.preview_active) {\n        this.container.removeChild(this.preview_canvas);\n        delete this.preview_context;\n        delete this.preview_canvas;\n        this.preview_active = false;\n        this.flip();\n      }\n    },\n    flip: function flip() {\n      if (this.params.flip_horiz) {\n        var e = this.container.style;\n        e.webkitTransform = \"scaleX(-1)\";\n        e.mozTransform = \"scaleX(-1)\";\n        e.msTransform = \"scaleX(-1)\";\n        e.oTransform = \"scaleX(-1)\";\n        e.transform = \"scaleX(-1)\";\n        e.filter = \"FlipH\";\n        e.msFilter = \"FlipH\";\n      }\n    },\n    unflip: function unflip() {\n      if (this.params.flip_horiz) {\n        var e = this.container.style;\n        e.webkitTransform = \"scaleX(1)\";\n        e.mozTransform = \"scaleX(1)\";\n        e.msTransform = \"scaleX(1)\";\n        e.oTransform = \"scaleX(1)\";\n        e.transform = \"scaleX(1)\";\n        e.filter = \"\";\n        e.msFilter = \"\";\n      }\n    },\n    savePreview: function savePreview(e, t) {\n      var a = this.params;\n      var i = this.preview_canvas;\n      var s = this.preview_context;\n\n      if (t) {\n        var r = t.getContext(\"2d\");\n        r.drawImage(i, 0, 0);\n      }\n\n      e(t ? null : i.toDataURL(\"image/\" + a.image_format, a.jpeg_quality / 100), i, s);\n      if (this.params.unfreeze_snap) this.unfreeze();\n    },\n    snap: function snap(e, t) {\n      if (!e) e = this.params.user_callback;\n      if (!t) t = this.params.user_canvas;\n      var a = this;\n      var s = this.params;\n      if (!this.loaded) return this.dispatch(\"error\", new i(\"Webcam is not loaded yet\"));\n      if (!e) return this.dispatch(\"error\", new i(\"Please provide a callback function or canvas to snap()\"));\n\n      if (this.preview_active) {\n        this.savePreview(e, t);\n        return null;\n      }\n\n      var r = document.createElement(\"canvas\");\n      r.width = this.params.dest_width;\n      r.height = this.params.dest_height;\n      var o = r.getContext(\"2d\");\n\n      if (this.params.flip_horiz) {\n        o.translate(s.dest_width, 0);\n        o.scale(-1, 1);\n      }\n\n      var n = function n() {\n        if (this.src && this.width && this.height) {\n          o.drawImage(this, 0, 0, s.dest_width, s.dest_height);\n        }\n\n        if (s.crop_width && s.crop_height) {\n          var a = document.createElement(\"canvas\");\n          a.width = s.crop_width;\n          a.height = s.crop_height;\n          var i = a.getContext(\"2d\");\n          i.drawImage(r, Math.floor(s.dest_width / 2 - s.crop_width / 2), Math.floor(s.dest_height / 2 - s.crop_height / 2), s.crop_width, s.crop_height, 0, 0, s.crop_width, s.crop_height);\n          o = i;\n          r = a;\n        }\n\n        if (t) {\n          var n = t.getContext(\"2d\");\n          n.drawImage(r, 0, 0);\n        }\n\n        e(t ? null : r.toDataURL(\"image/\" + s.image_format, s.jpeg_quality / 100), r, o);\n      };\n\n      if (this.userMedia) {\n        o.drawImage(this.video, 0, 0, this.params.dest_width, this.params.dest_height);\n        n();\n      } else if (this.iOS) {\n        var l = document.getElementById(this.container.id + \"-ios_div\");\n        var h = document.getElementById(this.container.id + \"-ios_img\");\n        var c = document.getElementById(this.container.id + \"-ios_input\");\n\n        iFunc = function (_iFunc) {\n          function iFunc(_x) {\n            return _iFunc.apply(this, arguments);\n          }\n\n          iFunc.toString = function () {\n            return _iFunc.toString();\n          };\n\n          return iFunc;\n        }(function (e) {\n          n.call(h);\n          h.removeEventListener(\"load\", iFunc);\n          l.style.backgroundImage = \"none\";\n          h.removeAttribute(\"src\");\n          c.value = null;\n        });\n\n        if (!c.value) {\n          h.addEventListener(\"load\", iFunc);\n          c.style.display = \"block\";\n          c.focus();\n          c.click();\n          c.style.display = \"none\";\n        } else {\n          iFunc(null);\n        }\n      } else {\n        var d = this.getMovie()._snap();\n\n        var h = new Image();\n        h.onload = n;\n        h.src = \"data:image/\" + this.params.image_format + \";base64,\" + d;\n      }\n\n      return null;\n    },\n    configure: function configure(e) {\n      if (!e) e = \"camera\";\n\n      this.getMovie()._configure(e);\n    },\n    flashNotify: function flashNotify(e, t) {\n      switch (e) {\n        case \"flashLoadComplete\":\n          this.loaded = true;\n          this.dispatch(\"load\");\n          break;\n\n        case \"cameraLive\":\n          this.live = true;\n          this.dispatch(\"live\");\n          break;\n\n        case \"error\":\n          this.dispatch(\"error\", new a(t));\n          break;\n\n        default:\n          break;\n      }\n    },\n    b64ToUint6: function b64ToUint6(e) {\n      return e > 64 && e < 91 ? e - 65 : e > 96 && e < 123 ? e - 71 : e > 47 && e < 58 ? e + 4 : e === 43 ? 62 : e === 47 ? 63 : 0;\n    },\n    base64DecToArr: function base64DecToArr(e, t) {\n      var a = e.replace(/[^A-Za-z0-9\\+\\/]/g, \"\"),\n          i = a.length,\n          s = t ? Math.ceil((i * 3 + 1 >> 2) / t) * t : i * 3 + 1 >> 2,\n          r = new Uint8Array(s);\n\n      for (var o, n, l = 0, h = 0, c = 0; c < i; c++) {\n        n = c & 3;\n        l |= this.b64ToUint6(a.charCodeAt(c)) << 18 - 6 * n;\n\n        if (n === 3 || i - c === 1) {\n          for (o = 0; o < 3 && h < s; o++, h++) {\n            r[h] = l >>> (16 >>> o & 24) & 255;\n          }\n\n          l = 0;\n        }\n      }\n\n      return r;\n    },\n    upload: function upload(e, t, a) {\n      var i = this.params.upload_name || \"webcam\";\n      var s = \"\";\n      if (e.match(/^data\\:image\\/(\\w+)/)) s = RegExp.$1;else throw \"Cannot locate image format in Data URI\";\n      var r = e.replace(/^data\\:image\\/\\w+\\;base64\\,/, \"\");\n      var o = new XMLHttpRequest();\n      o.open(\"POST\", t, true);\n\n      if (o.upload && o.upload.addEventListener) {\n        o.upload.addEventListener(\"progress\", function (e) {\n          if (e.lengthComputable) {\n            var t = e.loaded / e.total;\n            Webcam.dispatch(\"uploadProgress\", t, e);\n          }\n        }, false);\n      }\n\n      var n = this;\n\n      o.onload = function () {\n        if (a) a.apply(n, [o.status, o.responseText, o.statusText]);\n        Webcam.dispatch(\"uploadComplete\", o.status, o.responseText, o.statusText);\n      };\n\n      var l = new Blob([this.base64DecToArr(r)], {\n        type: \"image/\" + s\n      });\n      var h = new FormData();\n      h.append(i, l, i + \".\" + s.replace(/e/, \"\"));\n      o.send(h);\n    }\n  };\n  Webcam.init();\n\n  if (typeof define === \"function\" && define.amd) {\n    define(function () {\n      return Webcam;\n    });\n  } else if (typeof module === \"object\" && module.exports) {\n    module.exports = Webcam;\n  } else {\n    e.Webcam = Webcam;\n  }\n})(window);","map":{"version":3,"sources":["/home/lihn/rollcall/app/javascript/packs/webcam.min.js"],"names":["e","t","a","Error","apply","arguments","name","stack","message","i","s","prototype","Webcam","version","protocol","location","match","loaded","live","userMedia","iOS","test","navigator","userAgent","MSStream","params","width","height","dest_width","dest_height","image_format","jpeg_quality","enable_flash","force_flash","flip_horiz","fps","upload_name","constraints","swfURL","flashNotDetectedText","noInterfaceFoundText","unfreeze_snap","iosPlaceholderText","user_callback","user_canvas","errors","FlashError","WebcamError","hooks","init","mediaDevices","getUserMedia","mozGetUserMedia","webkitGetUserMedia","Promise","call","URL","webkitURL","mozURL","msURL","parseInt","RegExp","$1","addEventListener","reset","exifOrientation","DataView","getUint8","console","log","byteLength","n","String","fromCharCode","r","getUint16","o","getUint32","l","h","c","d","f","m","p","fixOrientation","Image","document","createElement","getContext","transform","drawImage","src","toDataURL","attach","getElementById","querySelector","dispatch","container","innerHTML","appendChild","peg","offsetWidth","offsetHeight","undefined","setAttribute","style","overflow","webkitTransformOrigin","mozTransformOrigin","msTransformOrigin","oTransformOrigin","transformOrigin","webkitTransform","mozTransform","msTransform","oTransform","video","audio","mandatory","minWidth","minHeight","then","onloadedmetadata","stream","flip","srcObject","createObjectURL","detectFlash","setTimeout","id","className","textAlign","display","verticalAlign","backgroundRepeat","backgroundSize","backgroundPosition","target","files","length","type","indexOf","ratio","Math","min","backgroundImage","FileReader","result","XMLHttpRequest","open","responseType","onload","status","readAsArrayBuffer","response","send","snap","focus","click","getSWFHTML","crop_width","crop_height","floor","u","scrollLeft","scrollTop","preview_active","unfreeze","unflip","getVideoTracks","stop","getMovie","_releaseCamera","set","on","replace","toLowerCase","push","off","splice","Array","slice","toString","alert","setSWFLocation","plugins","description","mimeTypes","enabledPlugin","ActiveXObject","GetVariable","getElementsByTagName","getAttribute","localStorage","getItem","new_user","setItem","escape","_snap","freeze","preview_canvas","preview_context","position","left","top","insertBefore","removeChild","filter","msFilter","savePreview","translate","scale","iFunc","removeEventListener","removeAttribute","value","configure","_configure","flashNotify","b64ToUint6","base64DecToArr","ceil","Uint8Array","charCodeAt","upload","lengthComputable","total","responseText","statusText","Blob","FormData","append","define","amd","module","exports","window"],"mappings":"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","sourcesContent":["// WebcamJS v1.0.25 - http://github.com/jhuckaby/webcamjs - MIT Licensed\n(function(e){var t;function a(){var e=Error.apply(this,arguments);e.name=this.name=\"FlashError\";this.stack=e.stack;this.message=e.message}function i(){var e=Error.apply(this,arguments);e.name=this.name=\"WebcamError\";this.stack=e.stack;this.message=e.message}var s=function(){};s.prototype=Error.prototype;a.prototype=new s;i.prototype=new s;var Webcam={version:\"1.0.25\",protocol:location.protocol.match(/https/i)?\"https\":\"http\",loaded:false,live:false,userMedia:true,iOS:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream,params:{width:0,height:0,dest_width:0,dest_height:0,image_format:\"jpeg\",jpeg_quality:90,enable_flash:true,force_flash:false,flip_horiz:false,fps:30,upload_name:\"webcam\",constraints:null,swfURL:\"\",flashNotDetectedText:\"ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).\",noInterfaceFoundText:\"No supported webcam interface found.\",unfreeze_snap:true,iosPlaceholderText:\"Click here to open camera.\",user_callback:null,user_canvas:null},errors:{FlashError:a,WebcamError:i},hooks:{},init:function(){var t=this;this.mediaDevices=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices:navigator.mozGetUserMedia||navigator.webkitGetUserMedia?{getUserMedia:function(e){return new Promise(function(t,a){(navigator.mozGetUserMedia||navigator.webkitGetUserMedia).call(navigator,e,t,a)})}}:null;e.URL=e.URL||e.webkitURL||e.mozURL||e.msURL;this.userMedia=this.userMedia&&!!this.mediaDevices&&!!e.URL;if(this.iOS){this.userMedia=null}if(navigator.userAgent.match(/Firefox\\D+(\\d+)/)){if(parseInt(RegExp.$1,10)<21)this.userMedia=null}if(this.userMedia){e.addEventListener(\"beforeunload\",function(e){t.reset()})}},exifOrientation:function(e){var t=new DataView(e);if(t.getUint8(0)!=255||t.getUint8(1)!=216){console.log(\"Not a valid JPEG file\");return 0}var a=2;var i=null;while(a<e.byteLength){if(t.getUint8(a)!=255){console.log(\"Not a valid marker at offset \"+a+\", found: \"+t.getUint8(a));return 0}i=t.getUint8(a+1);if(i==225){a+=4;var s=\"\";for(n=0;n<4;n++){s+=String.fromCharCode(t.getUint8(a+n))}if(s!=\"Exif\"){console.log(\"Not valid EXIF data found\");return 0}a+=6;var r=null;if(t.getUint16(a)==18761){r=false}else if(t.getUint16(a)==19789){r=true}else{console.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");return 0}if(t.getUint16(a+2,!r)!=42){console.log(\"Not valid TIFF data! (no 0x002A)\");return 0}var o=t.getUint32(a+4,!r);if(o<8){console.log(\"Not valid TIFF data! (First offset less than 8)\",t.getUint32(a+4,!r));return 0}var l=a+o;var h=t.getUint16(l,!r);for(var c=0;c<h;c++){var d=l+c*12+2;if(t.getUint16(d,!r)==274){var f=t.getUint16(d+2,!r);var m=t.getUint32(d+4,!r);if(f!=3&&m!=1){console.log(\"Invalid EXIF orientation value type (\"+f+\") or count (\"+m+\")\");return 0}var p=t.getUint16(d+8,!r);if(p<1||p>8){console.log(\"Invalid EXIF orientation value (\"+p+\")\");return 0}return p}}}else{a+=2+t.getUint16(a+2)}}return 0},fixOrientation:function(e,t,a){var i=new Image;i.addEventListener(\"load\",function(e){var s=document.createElement(\"canvas\");var r=s.getContext(\"2d\");if(t<5){s.width=i.width;s.height=i.height}else{s.width=i.height;s.height=i.width}switch(t){case 2:r.transform(-1,0,0,1,i.width,0);break;case 3:r.transform(-1,0,0,-1,i.width,i.height);break;case 4:r.transform(1,0,0,-1,0,i.height);break;case 5:r.transform(0,1,1,0,0,0);break;case 6:r.transform(0,1,-1,0,i.height,0);break;case 7:r.transform(0,-1,-1,0,i.height,i.width);break;case 8:r.transform(0,-1,1,0,0,i.width);break}r.drawImage(i,0,0);a.src=s.toDataURL()},false);i.src=e},attach:function(a){if(typeof a==\"string\"){a=document.getElementById(a)||document.querySelector(a)}if(!a){return this.dispatch(\"error\",new i(\"Could not locate DOM element to attach to.\"))}this.container=a;a.innerHTML=\"\";var s=document.createElement(\"div\");a.appendChild(s);this.peg=s;if(!this.params.width)this.params.width=a.offsetWidth;if(!this.params.height)this.params.height=a.offsetHeight;if(!this.params.width||!this.params.height){return this.dispatch(\"error\",new i(\"No width and/or height for webcam.  Please call set() first, or attach to a visible element.\"))}if(!this.params.dest_width)this.params.dest_width=this.params.width;if(!this.params.dest_height)this.params.dest_height=this.params.height;this.userMedia=t===undefined?this.userMedia:t;if(this.params.force_flash){t=this.userMedia;this.userMedia=null}if(typeof this.params.fps!==\"number\")this.params.fps=30;var r=this.params.width/this.params.dest_width;var o=this.params.height/this.params.dest_height;if(this.userMedia){var n=document.createElement(\"video\");n.setAttribute(\"autoplay\",\"autoplay\");n.style.width=\"\"+this.params.dest_width+\"px\";n.style.height=\"\"+this.params.dest_height+\"px\";if(r!=1||o!=1){a.style.overflow=\"hidden\";n.style.webkitTransformOrigin=\"0px 0px\";n.style.mozTransformOrigin=\"0px 0px\";n.style.msTransformOrigin=\"0px 0px\";n.style.oTransformOrigin=\"0px 0px\";n.style.transformOrigin=\"0px 0px\";n.style.webkitTransform=\"scaleX(\"+r+\") scaleY(\"+o+\")\";n.style.mozTransform=\"scaleX(\"+r+\") scaleY(\"+o+\")\";n.style.msTransform=\"scaleX(\"+r+\") scaleY(\"+o+\")\";n.style.oTransform=\"scaleX(\"+r+\") scaleY(\"+o+\")\";n.style.transform=\"scaleX(\"+r+\") scaleY(\"+o+\")\"}a.appendChild(n);this.video=n;var l=this;this.mediaDevices.getUserMedia({audio:false,video:this.params.constraints||{mandatory:{minWidth:this.params.dest_width,minHeight:this.params.dest_height}}}).then(function(t){n.onloadedmetadata=function(e){l.stream=t;l.loaded=true;l.live=true;l.dispatch(\"load\");l.dispatch(\"live\");l.flip()};if(\"srcObject\"in n){n.srcObject=t}else{n.src=e.URL.createObjectURL(t)}}).catch(function(e){if(l.params.enable_flash&&l.detectFlash()){setTimeout(function(){l.params.force_flash=1;l.attach(a)},1)}else{l.dispatch(\"error\",e)}})}else if(this.iOS){var h=document.createElement(\"div\");h.id=this.container.id+\"-ios_div\";h.className=\"webcamjs-ios-placeholder\";h.style.width=\"\"+this.params.width+\"px\";h.style.height=\"\"+this.params.height+\"px\";h.style.textAlign=\"center\";h.style.display=\"table-cell\";h.style.verticalAlign=\"middle\";h.style.backgroundRepeat=\"no-repeat\";h.style.backgroundSize=\"contain\";h.style.backgroundPosition=\"center\";var c=document.createElement(\"span\");c.className=\"webcamjs-ios-text\";c.innerHTML=this.params.iosPlaceholderText;h.appendChild(c);var d=document.createElement(\"img\");d.id=this.container.id+\"-ios_img\";d.style.width=\"\"+this.params.dest_width+\"px\";d.style.height=\"\"+this.params.dest_height+\"px\";d.style.display=\"none\";h.appendChild(d);var f=document.createElement(\"input\");f.id=this.container.id+\"-ios_input\";f.setAttribute(\"type\",\"file\");f.setAttribute(\"accept\",\"image/*\");f.setAttribute(\"capture\",\"camera\");var l=this;var m=this.params;f.addEventListener(\"change\",function(e){if(e.target.files.length>0&&e.target.files[0].type.indexOf(\"image/\")==0){var t=URL.createObjectURL(e.target.files[0]);var a=new Image;a.addEventListener(\"load\",function(e){var t=document.createElement(\"canvas\");t.width=m.dest_width;t.height=m.dest_height;var i=t.getContext(\"2d\");ratio=Math.min(a.width/m.dest_width,a.height/m.dest_height);var s=m.dest_width*ratio;var r=m.dest_height*ratio;var o=(a.width-s)/2;var n=(a.height-r)/2;i.drawImage(a,o,n,s,r,0,0,m.dest_width,m.dest_height);var l=t.toDataURL();d.src=l;h.style.backgroundImage=\"url('\"+l+\"')\"},false);var i=new FileReader;i.addEventListener(\"load\",function(e){var i=l.exifOrientation(e.target.result);if(i>1){l.fixOrientation(t,i,a)}else{a.src=t}},false);var s=new XMLHttpRequest;s.open(\"GET\",t,true);s.responseType=\"blob\";s.onload=function(e){if(this.status==200||this.status===0){i.readAsArrayBuffer(this.response)}};s.send()}},false);f.style.display=\"none\";a.appendChild(f);h.addEventListener(\"click\",function(e){if(m.user_callback){l.snap(m.user_callback,m.user_canvas)}else{f.style.display=\"block\";f.focus();f.click();f.style.display=\"none\"}},false);a.appendChild(h);this.loaded=true;this.live=true}else if(this.params.enable_flash&&this.detectFlash()){e.Webcam=Webcam;var h=document.createElement(\"div\");h.innerHTML=this.getSWFHTML();a.appendChild(h)}else{this.dispatch(\"error\",new i(this.params.noInterfaceFoundText))}if(this.params.crop_width&&this.params.crop_height){var p=Math.floor(this.params.crop_width*r);var u=Math.floor(this.params.crop_height*o);a.style.width=\"\"+p+\"px\";a.style.height=\"\"+u+\"px\";a.style.overflow=\"hidden\";a.scrollLeft=Math.floor(this.params.width/2-p/2);a.scrollTop=Math.floor(this.params.height/2-u/2)}else{a.style.width=\"\"+this.params.width+\"px\";a.style.height=\"\"+this.params.height+\"px\"}},reset:function(){if(this.preview_active)this.unfreeze();this.unflip();if(this.userMedia){if(this.stream){if(this.stream.getVideoTracks){var e=this.stream.getVideoTracks();if(e&&e[0]&&e[0].stop)e[0].stop()}else if(this.stream.stop){this.stream.stop()}}delete this.stream;delete this.video}if(this.userMedia!==true&&this.loaded&&!this.iOS){var t=this.getMovie();if(t&&t._releaseCamera)t._releaseCamera()}if(this.container){this.container.innerHTML=\"\";delete this.container}this.loaded=false;this.live=false},set:function(){if(arguments.length==1){for(var e in arguments[0]){this.params[e]=arguments[0][e]}}else{this.params[arguments[0]]=arguments[1]}},on:function(e,t){e=e.replace(/^on/i,\"\").toLowerCase();if(!this.hooks[e])this.hooks[e]=[];this.hooks[e].push(t)},off:function(e,t){e=e.replace(/^on/i,\"\").toLowerCase();if(this.hooks[e]){if(t){var a=this.hooks[e].indexOf(t);if(a>-1)this.hooks[e].splice(a,1)}else{this.hooks[e]=[]}}},dispatch:function(){var t=arguments[0].replace(/^on/i,\"\").toLowerCase();var s=Array.prototype.slice.call(arguments,1);if(this.hooks[t]&&this.hooks[t].length){for(var r=0,o=this.hooks[t].length;r<o;r++){var n=this.hooks[t][r];if(typeof n==\"function\"){n.apply(this,s)}else if(typeof n==\"object\"&&n.length==2){n[0][n[1]].apply(n[0],s)}else if(e[n]){e[n].apply(e,s)}}return true}else if(t==\"error\"){var l;if(s[0]instanceof a||s[0]instanceof i){l=s[0].message}else{l=\"Could not access webcam: \"+s[0].name+\": \"+s[0].message+\" \"+s[0].toString()}alert(\"Webcam.js Error: \"+l)}return false},setSWFLocation:function(e){this.set(\"swfURL\",e)},detectFlash:function(){var t=\"Shockwave Flash\",a=\"ShockwaveFlash.ShockwaveFlash\",i=\"application/x-shockwave-flash\",s=e,r=navigator,o=false;if(typeof r.plugins!==\"undefined\"&&typeof r.plugins[t]===\"object\"){var n=r.plugins[t].description;if(n&&(typeof r.mimeTypes!==\"undefined\"&&r.mimeTypes[i]&&r.mimeTypes[i].enabledPlugin)){o=true}}else if(typeof s.ActiveXObject!==\"undefined\"){try{var l=new ActiveXObject(a);if(l){var h=l.GetVariable(\"$version\");if(h)o=true}}catch(e){}}return o},getSWFHTML:function(){var t=\"\",i=this.params.swfURL;if(location.protocol.match(/file/)){this.dispatch(\"error\",new a(\"Flash does not work from local disk.  Please run from a web server.\"));return'<h3 style=\"color:red\">ERROR: the Webcam.js Flash fallback does not work from local disk.  Please run it from a web server.</h3>'}if(!this.detectFlash()){this.dispatch(\"error\",new a(\"Adobe Flash Player not found.  Please install from get.adobe.com/flashplayer and try again.\"));return'<h3 style=\"color:red\">'+this.params.flashNotDetectedText+\"</h3>\"}if(!i){var s=\"\";var r=document.getElementsByTagName(\"script\");for(var o=0,n=r.length;o<n;o++){var l=r[o].getAttribute(\"src\");if(l&&l.match(/\\/webcam(\\.min)?\\.js/)){s=l.replace(/\\/webcam(\\.min)?\\.js.*$/,\"\");o=n}}if(s)i=s+\"/webcam.swf\";else i=\"webcam.swf\"}if(e.localStorage&&!localStorage.getItem(\"visited\")){this.params.new_user=1;localStorage.setItem(\"visited\",1)}var h=\"\";for(var c in this.params){if(h)h+=\"&\";h+=c+\"=\"+escape(this.params[c])}t+='<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" type=\"application/x-shockwave-flash\" codebase=\"'+this.protocol+'://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0\" width=\"'+this.params.width+'\" height=\"'+this.params.height+'\" id=\"webcam_movie_obj\" align=\"middle\"><param name=\"wmode\" value=\"opaque\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"false\" /><param name=\"movie\" value=\"'+i+'\" /><param name=\"loop\" value=\"false\" /><param name=\"menu\" value=\"false\" /><param name=\"quality\" value=\"best\" /><param name=\"bgcolor\" value=\"#ffffff\" /><param name=\"flashvars\" value=\"'+h+'\"/><embed id=\"webcam_movie_embed\" src=\"'+i+'\" wmode=\"opaque\" loop=\"false\" menu=\"false\" quality=\"best\" bgcolor=\"#ffffff\" width=\"'+this.params.width+'\" height=\"'+this.params.height+'\" name=\"webcam_movie_embed\" align=\"middle\" allowScriptAccess=\"always\" allowFullScreen=\"false\" type=\"application/x-shockwave-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" flashvars=\"'+h+'\"></embed></object>';return t},getMovie:function(){if(!this.loaded)return this.dispatch(\"error\",new a(\"Flash Movie is not loaded yet\"));var e=document.getElementById(\"webcam_movie_obj\");if(!e||!e._snap)e=document.getElementById(\"webcam_movie_embed\");if(!e)this.dispatch(\"error\",new a(\"Cannot locate Flash movie in DOM\"));return e},freeze:function(){var e=this;var t=this.params;if(this.preview_active)this.unfreeze();var a=this.params.width/this.params.dest_width;var i=this.params.height/this.params.dest_height;this.unflip();var s=t.crop_width||t.dest_width;var r=t.crop_height||t.dest_height;var o=document.createElement(\"canvas\");o.width=s;o.height=r;var n=o.getContext(\"2d\");this.preview_canvas=o;this.preview_context=n;if(a!=1||i!=1){o.style.webkitTransformOrigin=\"0px 0px\";o.style.mozTransformOrigin=\"0px 0px\";o.style.msTransformOrigin=\"0px 0px\";o.style.oTransformOrigin=\"0px 0px\";o.style.transformOrigin=\"0px 0px\";o.style.webkitTransform=\"scaleX(\"+a+\") scaleY(\"+i+\")\";o.style.mozTransform=\"scaleX(\"+a+\") scaleY(\"+i+\")\";o.style.msTransform=\"scaleX(\"+a+\") scaleY(\"+i+\")\";o.style.oTransform=\"scaleX(\"+a+\") scaleY(\"+i+\")\";o.style.transform=\"scaleX(\"+a+\") scaleY(\"+i+\")\"}this.snap(function(){o.style.position=\"relative\";o.style.left=\"\"+e.container.scrollLeft+\"px\";o.style.top=\"\"+e.container.scrollTop+\"px\";e.container.insertBefore(o,e.peg);e.container.style.overflow=\"hidden\";e.preview_active=true},o)},unfreeze:function(){if(this.preview_active){this.container.removeChild(this.preview_canvas);delete this.preview_context;delete this.preview_canvas;this.preview_active=false;this.flip()}},flip:function(){if(this.params.flip_horiz){var e=this.container.style;e.webkitTransform=\"scaleX(-1)\";e.mozTransform=\"scaleX(-1)\";e.msTransform=\"scaleX(-1)\";e.oTransform=\"scaleX(-1)\";e.transform=\"scaleX(-1)\";e.filter=\"FlipH\";e.msFilter=\"FlipH\"}},unflip:function(){if(this.params.flip_horiz){var e=this.container.style;e.webkitTransform=\"scaleX(1)\";e.mozTransform=\"scaleX(1)\";e.msTransform=\"scaleX(1)\";e.oTransform=\"scaleX(1)\";e.transform=\"scaleX(1)\";e.filter=\"\";e.msFilter=\"\"}},savePreview:function(e,t){var a=this.params;var i=this.preview_canvas;var s=this.preview_context;if(t){var r=t.getContext(\"2d\");r.drawImage(i,0,0)}e(t?null:i.toDataURL(\"image/\"+a.image_format,a.jpeg_quality/100),i,s);if(this.params.unfreeze_snap)this.unfreeze()},snap:function(e,t){if(!e)e=this.params.user_callback;if(!t)t=this.params.user_canvas;var a=this;var s=this.params;if(!this.loaded)return this.dispatch(\"error\",new i(\"Webcam is not loaded yet\"));if(!e)return this.dispatch(\"error\",new i(\"Please provide a callback function or canvas to snap()\"));if(this.preview_active){this.savePreview(e,t);return null}var r=document.createElement(\"canvas\");r.width=this.params.dest_width;r.height=this.params.dest_height;var o=r.getContext(\"2d\");if(this.params.flip_horiz){o.translate(s.dest_width,0);o.scale(-1,1)}var n=function(){if(this.src&&this.width&&this.height){o.drawImage(this,0,0,s.dest_width,s.dest_height)}if(s.crop_width&&s.crop_height){var a=document.createElement(\"canvas\");a.width=s.crop_width;a.height=s.crop_height;var i=a.getContext(\"2d\");i.drawImage(r,Math.floor(s.dest_width/2-s.crop_width/2),Math.floor(s.dest_height/2-s.crop_height/2),s.crop_width,s.crop_height,0,0,s.crop_width,s.crop_height);o=i;r=a}if(t){var n=t.getContext(\"2d\");n.drawImage(r,0,0)}e(t?null:r.toDataURL(\"image/\"+s.image_format,s.jpeg_quality/100),r,o)};if(this.userMedia){o.drawImage(this.video,0,0,this.params.dest_width,this.params.dest_height);n()}else if(this.iOS){var l=document.getElementById(this.container.id+\"-ios_div\");var h=document.getElementById(this.container.id+\"-ios_img\");var c=document.getElementById(this.container.id+\"-ios_input\");iFunc=function(e){n.call(h);h.removeEventListener(\"load\",iFunc);l.style.backgroundImage=\"none\";h.removeAttribute(\"src\");c.value=null};if(!c.value){h.addEventListener(\"load\",iFunc);c.style.display=\"block\";c.focus();c.click();c.style.display=\"none\"}else{iFunc(null)}}else{var d=this.getMovie()._snap();var h=new Image;h.onload=n;h.src=\"data:image/\"+this.params.image_format+\";base64,\"+d}return null},configure:function(e){if(!e)e=\"camera\";this.getMovie()._configure(e)},flashNotify:function(e,t){switch(e){case\"flashLoadComplete\":this.loaded=true;this.dispatch(\"load\");break;case\"cameraLive\":this.live=true;this.dispatch(\"live\");break;case\"error\":this.dispatch(\"error\",new a(t));break;default:break}},b64ToUint6:function(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0},base64DecToArr:function(e,t){var a=e.replace(/[^A-Za-z0-9\\+\\/]/g,\"\"),i=a.length,s=t?Math.ceil((i*3+1>>2)/t)*t:i*3+1>>2,r=new Uint8Array(s);for(var o,n,l=0,h=0,c=0;c<i;c++){n=c&3;l|=this.b64ToUint6(a.charCodeAt(c))<<18-6*n;if(n===3||i-c===1){for(o=0;o<3&&h<s;o++,h++){r[h]=l>>>(16>>>o&24)&255}l=0}}return r},upload:function(e,t,a){var i=this.params.upload_name||\"webcam\";var s=\"\";if(e.match(/^data\\:image\\/(\\w+)/))s=RegExp.$1;else throw\"Cannot locate image format in Data URI\";var r=e.replace(/^data\\:image\\/\\w+\\;base64\\,/,\"\");var o=new XMLHttpRequest;o.open(\"POST\",t,true);if(o.upload&&o.upload.addEventListener){o.upload.addEventListener(\"progress\",function(e){if(e.lengthComputable){var t=e.loaded/e.total;Webcam.dispatch(\"uploadProgress\",t,e)}},false)}var n=this;o.onload=function(){if(a)a.apply(n,[o.status,o.responseText,o.statusText]);Webcam.dispatch(\"uploadComplete\",o.status,o.responseText,o.statusText)};var l=new Blob([this.base64DecToArr(r)],{type:\"image/\"+s});var h=new FormData;h.append(i,l,i+\".\"+s.replace(/e/,\"\"));o.send(h)}};Webcam.init();if(typeof define===\"function\"&&define.amd){define(function(){return Webcam})}else if(typeof module===\"object\"&&module.exports){module.exports=Webcam}else{e.Webcam=Webcam}})(window);"]},"metadata":{},"sourceType":"module"}